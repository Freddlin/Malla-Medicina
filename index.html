<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Curricular Medicina</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #fff;
      color: #000;
    }
    h2 {
      background-color: #ff5c00;
      color: white;
      padding: 10px;
      margin: 0;
      text-align: center;
      font-size: 1.1rem;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      padding: 20px;
      gap: 15px;
      justify-content: center;
    }
    .column {
      flex: 1 1 200px;
      max-width: 260px;
    }
    .subject {
      border: 2px solid #ff5c00;
      padding: 8px;
      margin: 4px 0;
      border-radius: 5px;
      text-align: center;
      cursor: pointer;
      transition: background 0.3s, opacity 0.3s;
    }
    .subject.aprobada {
      text-decoration: line-through;
      opacity: 0.6;
    }
    .subject.bloqueada {
      border-style: dashed;
      color: gray;
      cursor: not-allowed;
      position: relative;
    }
    .subject.bloqueada::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.75);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      white-space: nowrap;
      font-size: 0.8em;
      display: none;
    }
    .subject.bloqueada:hover::after {
      display: block;
    }
    .section-title {
      background-color: #e0e0e0;
      padding: 6px;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <h2>Plan de Estudios - Medicina</h2>
  <div class="container">
    <div class="column">
      <h2>CBC</h2>
      <div class="subject" onclick="toggle(this)">Química</div>
      <div class="subject" onclick="toggle(this)">Int. Con. Sociedad y Estado</div>
      <div class="subject" onclick="toggle(this)">Int. Pensamiento Científico</div>
      <div class="subject" onclick="toggle(this)">Matemática</div>
      <div class="subject" onclick="toggle(this)">Física e Int. Biofísica</div>
      <div class="subject" onclick="toggle(this)">Biología e Int. Biología Celular</div>
    </div>

    <div class="column">
      <h2>Ciclo Biomédico</h2>
      <div class="section-title">Primer Año</div>
      <div class="subject" data-req="CBC" onclick="toggle(this)">Anatomía</div>
      <div class="subject" data-req="CBC" onclick="toggle(this)">Histología - Biología Celular Embriología - Genética</div>
      <div class="subject" data-req="CBC" onclick="toggle(this)">Salud Mental</div>
      <div class="subject" data-req="CBC" onclick="toggle(this)">Bioética I</div>
      <div class="subject" data-req="CBC" onclick="toggle(this)">Medicina Familiar</div>
      <div class="section-title">Segundo Año</div>
      <div class="subject" data-req="Anatomía,Histología - Biología Celular Embriología - Genética" onclick="toggle(this)">Química Biológica</div>
      <div class="subject" data-req="Anatomía,Histología - Biología Celular Embriología - Genética" onclick="toggle(this)">Fisiología y Biofísica</div>
      <div class="section-title">Tercer Año</div>
      <div class="subject" data-req="Química Biológica,Fisiología y Biofísica" onclick="toggle(this)">Microbiología y Parasitología I</div>
      <div class="subject" data-req="Química Biológica,Fisiología y Biofísica" onclick="toggle(this)">Inmunología Humana</div>
      <div class="subject" data-req="Microbiología y Parasitología I,Inmunología Humana,Química Biológica,Fisiología y Biofísica" onclick="toggle(this)">Microbiología y Parasitología II</div>
      <div class="subject" data-req="Química Biológica,Fisiología y Biofísica" onclick="toggle(this)">Patología I</div>
      <div class="subject" data-req="Química Biológica,Fisiología y Biofísica" onclick="toggle(this)">Farmacología I</div>
    </div>

    <div class="column">
      <h2>Ciclo Clínico</h2>
      <div class="subject" data-req="Microbiología y Parasitología I,Inmunología Humana,Patología I,Farmacología I,Salud Mental,Bioética I" onclick="toggle(this)">Medicina A (semiología - fisiopatología)</div>
      <div class="subject" data-req="Microbiología y Parasitología I,Inmunología Humana,Patología I,Farmacología I,Salud Mental,Bioética I" onclick="toggle(this)">Patología II</div>
      <div class="subject" data-req="Microbiología y Parasitología II" onclick="toggle(this)">Salud Pública I</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología)" onclick="toggle(this)">Farmacología II</div>
      <div class="subject" data-req="Salud Pública I" onclick="toggle(this)">Salud Pública II</div>
      <div class="subject" data-req="Psiquiatría" onclick="toggle(this)">Medicina Legal Deontología Médica</div>
      <div class="subject" data-req="Bioética I" onclick="toggle(this)">Bioética II</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Toxicología</div>
    </div>

    <div class="column">
      <h2>Clínicas</h2>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Medicina B (Medicina Interna)</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Nutrición</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Diagnóstico por Imágenes</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Dermatología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Infectología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Neumonología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Neurología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Psiquiatría</div>

      <h2>Quirúrgicas</h2>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Pediatría</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Obstetricia</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Ginecología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Cirugía General</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Urología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Ortopedia - Traumatología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Oftalmología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Otorrinolaringología</div>
      <div class="subject" data-req="Medicina A (semiología - fisiopatología),Patología II" onclick="toggle(this)">Neurocirugía</div>
    </div>

    <div class="column">
      <h2>Ciclo Internado Anual Rotatorio</h2>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">Clínica Médica</div>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">Cirugía</div>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">Tocoginecología</div>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">Pediatría</div>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">Salud Mental</div>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">APS</div>
      <div class="subject" data-req="CLINICO_COMPLETO" onclick="toggle(this)">Módulo Específico / Curso de Residencia</div>
    </div>
  </div>

  <script>
    function toggle(el) {
      if (el.classList.contains("bloqueada")) return;
      el.classList.toggle("aprobada");
      actualizarEstado();
    }

    function actualizarEstado() {
      const materias = document.querySelectorAll(".subject");
      const aprobadas = [...materias].filter(m => m.classList.contains("aprobada"));
      const nombresAprobadas = aprobadas.map(m => m.textContent.trim());

      materias.forEach(m => {
        const req = m.getAttribute("data-req");
        if (!req) {
          m.classList.remove("bloqueada");
          m.removeAttribute("data-tooltip");
          return;
        }

        const requeridas = req.split(",");
        const completas = requeridas.every(r => nombresAprobadas.includes(r));
        if (completas) {
          m.classList.remove("bloqueada");
          m.removeAttribute("data-tooltip");
        } else {
          m.classList.add("bloqueada");
          m.setAttribute("data-tooltip", `Requiere: ${requeridas.join(", ")}`);
        }
      });

      // Verificación especial para Ciclo Clínico completo
      const clinico = [...materias].filter(m => m.getAttribute("data-req") && !m.getAttribute("data-req").includes("CLINICO_COMPLETO"));
      const clinicoAprobado = clinico.every(m => !m.classList.contains("bloqueada"));
      document.querySelectorAll("[data-req='CLINICO_COMPLETO']").forEach(m => {
        if (clinicoAprobado) {
          m.classList.remove("bloqueada");
          m.removeAttribute("data-tooltip");
        } else {
          m.classList.add("bloqueada");
          m.setAttribute("data-tooltip", "Requiere todo el Ciclo Clínico");
        }
      });
    }

    actualizarEstado();
  </script>
</body>
</html>
